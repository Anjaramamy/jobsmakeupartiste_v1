function CustomMarker(e){this.latlng=new google.maps.LatLng({lat:e.position.lat,lng:e.position.lng}),this.setMap(e.map),this.templateData=e.templateData,this.markerData={pin:e.markerPin,pinClass:e.markerClass}}function MarkerClusterer(e,t,r){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=r||{};this.gridSize_=s.gridSize||47,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,void 0!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var i=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=i.map_.getZoom();i.prevZoom_!=e&&(i.prevZoom_=e,i.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){i.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,r){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=r||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}!function(e){function t(){a()}function r(){}function s(){}function i(){}function a(){var t=e(".mkdf-ls-adv-search-holder select, .mkdf-ls-main-search-holder-part select, .mkdf-ls-archive-holder select,.mkdf-ls-single-comments .mkdf-ls-single-sort,.mkdf-membership-dashboard-page select");t.length&&t.each(function(){o(e(this))})}function o(e){mkdf.modules.listings.mkdfIsValidObject(e)&&e.select2({})}var n={};mkdf.modules.listingsSelect=n,n.mkdfOnDocumentReady=t,n.mkdfOnWindowLoad=r,n.mkdfOnWindowResize=s,n.mkdfOnWindowScroll=i,e(document).ready(t),e(window).load(r),e(window).resize(s),e(window).scroll(i),n.mkdfSelect2Fields=a,n.mkdfInitSelect2Field=o}(jQuery),function(e){function t(){o(),n(),a(),k()}function r(){}function s(){}function i(){}function a(){var t=e(".mkdf-ls-main-search-holder");t.length&&t.each(function(){var t=e(this),r=t.find(".mkdf-ls-main-search-keyword"),s=mkdfListingTitles.titles;r.autocomplete({source:s})})}function o(){var t=e(".job-manager-form fieldset #job_type"),r=t.val();l(r),d(r)}function n(){e(".job-manager-form fieldset #job_type").on("change",function(){var t=e(this),r=t.val();l(r),d(r)})}function l(t){if(void 0!==t&&null!==t&&t.length)if(t instanceof Array){var r;for(r=0;r<t.length;r++)e.inArray(t[r],mkdfListingGlobalVars.vars.selectedTypes)>-1||m(t[r])}else e.inArray(t,mkdfListingGlobalVars.vars.selectedTypes)>-1||m(t);else c()}function d(t){if(void 0!==t&&null!==t&&t.length){var r;for(r=0;r<mkdfListingGlobalVars.vars.selectedTypes.length;r++)e.inArray(mkdfListingGlobalVars.vars.selectedTypes[r],t)>-1||p(mkdfListingGlobalVars.vars.selectedTypes[r])}else c()}function m(t){var r=e(".job-manager-form"),s=r.attr("action"),i=e(".job-manager-form fieldset #job_type"),a=i.parent().parent(),o=s.split("="),n=o[1],l=!1;null!==n&&void 0!==n&&"add-new-listing"!==n&&(l=o[o.length-1]);var d={selectedType:t,action:"mkdf_listing_type_get_custom_fields",currentPostId:l};e.ajax({type:"POST",url:MikadoListingAjaxUrl,data:d,success:function(r){if("error"===r);else{mkdfListingGlobalVars.vars.selectedTypes.push(t);var s=e.parseJSON(r),i=s.html;a.after(i),u()}}})}function u(){var t=e(".job-manager-form .mkdf-ls-type-field-wrapper select");t.length&&t.each(function(){e(this).select2()})}function p(t){var r=e(".mkdf-ls-type-field-wrapper");r.length&&r.each(function(){var r=e(this);r.attr("id")===t&&setTimeout(function(){r.remove();var e=mkdfListingGlobalVars.vars.selectedTypes.indexOf(t);mkdfListingGlobalVars.vars.selectedTypes.splice(e,1)},300)})}function c(){var t=e(".mkdf-ls-type-field-wrapper ");t.length&&t.each(function(){var t=e(this);mkdfListingGlobalVars.vars.selectedTypes=[],t.remove()})}function h(e,t){if("append"===t){var r=mkdfMultipleMapVars.multiple.addresses;r=mkdfMultipleMapVars.multiple.addresses.concat(e),mkdfMultipleMapVars.multiple.addresses=r,mkdf.modules.maps.mkdfGoogleMaps.getDirectoryItemsAddresses({addresses:r})}else"replace"===t&&(mkdfMultipleMapVars.multiple.addresses=e,mkdf.modules.maps.mkdfGoogleMaps.getDirectoryItemsAddresses({addresses:e}))}function f(e,t,r){void 0!==e&&!1!==e&&null!==e&&(t<=r?e.show():e.hide())}function k(){var t=e(".mkdf-ls-archive-map-holder"),r=e(".mkdf-ls-archive-items");t.length&&r.length&&t.each(function(){r.find(".mkdf-ls-item").each(function(){var t=e(this);t.mouseenter(function(){var r=t.attr("id");e(".mkdf-map-marker-holder").length&&e(".mkdf-map-marker-holder").each(function(){var t=e(this),s=t.attr("id");r==s?(t.addClass("active"),setTimeout(function(){},300)):t.removeClass("active")})})}),r.mouseleave(function(){e(".mkdf-map-marker-holder").removeClass("active")})})}function g(e){return"false"!==e&&""!==e&&void 0!==e}var v={};mkdf.modules.listings=v,v.mkdfOnDocumentReady=t,v.mkdfOnWindowLoad=r,v.mkdfOnWindowResize=s,v.mkdfOnWindowScroll=i,e(document).ready(t),e(window).load(r),e(window).resize(s),e(window).scroll(i),v.mkdfInitListingTypeCustomFields=o,v.mkdfGetListingTypeCustomFieldsOnChange=n,v.mkdfInitListingMainSearch=a,v.mkdfBindTitles=k,v.mkdfShowHideButton=f,v.mkdfReinitMultipleGoogleMaps=h,v.mkdfIsValidObject=g}(jQuery),function(e){"use strict";function t(){r()}function r(){var t=e(".mkdf-ls-archive-holder");t.length&&t.each(function(){var t=e(this),r=t.find(".mkdf-archive-keyword-search"),a=t.find(".mkdf-archive-type-search"),o=(a.val(),t.find(".mkdf-archive-submit-button")),n=t.find(".mkdf-listing-archive-load-more"),l=mkdfListingTitles.titles,d=mkdfListingArchiveVar.searchParams;s(t,d.foundPosts),r.autocomplete({source:l}),o.on("click",function(){i(t,!1)}),void 0!==n&&null!==n&&n.on("click",function(){i(t,!0)}),mkdf.modules.listings.mkdfShowHideButton(n,d.nextPage,d.maxPage)})}function s(e,t){e.find(".mkdf-ls-archive-items-number span").html(t)}function i(t,r){var i=t.find(".mkdf-archive-keyword-search"),a=t.find(".mkdf-archive-type-checkboxes"),o=t.find(".mkdf-archive-location"),n=t.find(".mkdf-archive-category"),l=t.find(".mkdf-listing-archive-load-more"),d=t.find(".mkdf-ls-archive-items-inner"),m=mkdfListingArchiveVar.searchParams;m.keyword=i.val(),m.type={};var u={};if(a.length){e(".mkdf-ls-adv-search-input").each(function(){var t=e(this);t.is(":checked")&&(u[t.val()]=t.next().text().trim())})}m.type=u,m.location="",mkdf.modules.listings.mkdfIsValidObject(o)&&""!==o.val()&&(m.location=o.val());var p={};mkdf.modules.listings.mkdfIsValidObject(n)&&""!==n.val()&&(p[n.val()]=n.find("option:selected").text().trim()),m.category=p,r?m.enableLoadMore=!0:(m.enableLoadMore=!1,m.nextPage="2");var c={action:"mkdf_listing_job_get_archive_search_response",searchParams:m};e.ajax({type:"POST",url:MikadoListingAjaxUrl,data:c,success:function(i){if("error"===i);else{var a=e.parseJSON(i),o=a.foundPosts;s(t,o);var n=a.mapAddresses,u="";null!==n&&(u=n.addresses),m.maxPage=a.maxNumPages,r?(m.nextPage++,""!==u&&mkdf.modules.listings.mkdfReinitMultipleGoogleMaps(u,"append"),d.append(a.html),mkdf.modules.maps.mkdfGoogleMaps.initMarkerInfo()):(""!==u&&mkdf.modules.listings.mkdfReinitMultipleGoogleMaps(u,"replace"),d.html(a.html)),mkdf.modules.listings.mkdfBindTitles(),mkdf.modules.listings.mkdfShowHideButton(l,m.nextPage,m.maxPage),mkdfListingArchiveVar.searchParams=m}}})}var a={};mkdf.modules.listingArchive=a,a.mkdfOnDocumentReady=t,e(document).ready(t),a.mkdfInitArchiveSearch=r,a.mkdfGetArchiveSearchResponse=i,a.mkdfUpdateListingsNumber=s}(jQuery);var j=jQuery.noConflict();CustomMarker.prototype=new google.maps.OverlayView,CustomMarker.prototype.draw=function(){var e=this,t=this.div;if(!t){t=this.div=document.createElement("div");var r=this.templateData.title,r=r.toLowerCase(),r=r.replace(/ /g,"-");t.className="mkdf-map-marker-holder",t.setAttribute("id",r);var s=_.template(j(".mkdf-info-window-template").html());s=s(e.templateData);var i=_.template(j(".mkdf-marker-template").html());i=i(e.markerData),j(t).append(s),j(t).append(i),t.style.position="absolute",t.style.cursor="pointer";this.getPanes().overlayImage.appendChild(t)}var a=this.getProjection().fromLatLngToDivPixel(this.latlng);a&&(t.style.left=a.x+"px",t.style.top=a.y+"px")},CustomMarker.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},CustomMarker.prototype.getPosition=function(){return this.latlng},function(e){"use strict";function t(){}function r(){a(),o(),n()}function s(){}function i(){}function a(){e("#mkdf-ls-single-map-holder").length&&mkdf.modules.maps.mkdfGoogleMaps.getDirectoryItemAddress({mapHolder:"mkdf-ls-single-map-holder"})}function o(){e("#mkdf-ls-multiple-map-holder").length&&mkdf.modules.maps.mkdfGoogleMaps.getDirectoryItemsAddresses({mapHolder:"mkdf-ls-multiple-map-holder",hasFilter:!0})}function n(){var t=e(".mkdf-listing-view-larger-map a"),r=t.children("i"),s=e(".mkdf-map-holder");t.length&&t.click(function(e){e.preventDefault(),s.hasClass("mkdf-fullscreen-map")?(s.removeClass("mkdf-fullscreen-map"),r.removeClass("icon-basic-magnifier-minus"),r.addClass("icon-basic-magnifier-plus")):(s.addClass("mkdf-fullscreen-map"),r.removeClass("icon-basic-magnifier-plus"),r.addClass("icon-basic-magnifier-minus")),mkdf.modules.maps.mkdfGoogleMaps.getDirectoryItemsAddresses()})}var l={};mkdf.modules.maps=l,mkdf.modules.maps.mkdfInitMultipleListingMap=o,mkdf.modules.maps.mkdfInitSingleListingMap=a,mkdf.modules.maps.mkdfInitMobileMap=n,mkdf.modules.maps.mkdfGoogleMaps={},e(document).ready(t),e(window).load(r),e(window).resize(s),e(window).scroll(i),mkdf.modules.maps.mkdfGoogleMaps={mapHolder:{},map:{},markers:{},radius:{},getDirectoryItemAddress:function(t){var r={location:mkdfSingleMapVars.single.currentListing.location,type:mkdfSingleMapVars.single.currentListing.listingType,zoom:16,mapHolder:"",draggable:mkdfMapsVars.global.draggable,mapTypeControl:mkdfMapsVars.global.mapTypeControl,scrollwheel:mkdfMapsVars.global.scrollable,streetViewControl:mkdfMapsVars.global.streetViewControl,zoomControl:mkdfMapsVars.global.zoomControl,title:mkdfSingleMapVars.single.currentListing.title,content:"",styles:mkdfMapsVars.global.mapStyle,markerPin:mkdfSingleMapVars.single.currentListing.markerPin,featuredImage:mkdfSingleMapVars.single.currentListing.featuredImage,itemUrl:mkdfSingleMapVars.single.currentListing.itemUrl,itemAuthor:mkdfSingleMapVars.single.currentListing.itemAuthor,markerClass:mkdfSingleMapVars.single.currentListing.markerClass},s=e.extend({},r,t);this.mapHolder=s.mapHolder;var i=document.getElementById(s.mapHolder),a=new google.maps.Map(i,{zoom:s.zoom,draggable:s.draggable,mapTypeControl:s.mapTypeControl,scrollwheel:s.scrollwheel,streetViewControl:s.streetViewControl,zoomControl:s.zoomControl});if(a.setOptions({styles:s.styles}),void 0!==s.location&&null!==s.location){var o={lat:parseFloat(s.location.latitude),lng:parseFloat(s.location.longitude)};a.setCenter(o);var n={title:s.title,address:s.location.address,featuredImage:s.featuredImage,itemUrl:s.itemUrl,itemAuthor:s.itemAuthor};new CustomMarker({map:a,position:o,templateData:n,markerPin:s.markerPin,markerClass:s.markerClass});this.initMarkerInfo()}},getDirectoryItemsAddresses:function(t){var r={geolocation:!1,mapHolder:"mkdf-ls-multiple-map-holder",addresses:mkdfMultipleMapVars.multiple.addresses,draggable:mkdfMapsVars.global.draggable,mapTypeControl:mkdfMapsVars.global.mapTypeControl,scrollwheel:mkdfMapsVars.global.scrollable,streetViewControl:mkdfMapsVars.global.streetViewControl,zoomControl:mkdfMapsVars.global.zoomControl,zoom:16,styles:mkdfMapsVars.global.mapStyle,radius:50,hasFilter:!1},s=e.extend({},r,t),i=document.getElementById(s.mapHolder),a=new google.maps.Map(i,{zoom:s.zoom,draggable:s.draggable,mapTypeControl:s.mapTypeControl,scrollwheel:s.scrollwheel,streetViewControl:s.streetViewControl,zoomControl:s.zoomControl});this.mapHolder=s.mapHolder,this.map=a,this.radius=s.radius,a.setOptions({styles:s.styles}),navigator.geolocation&&s.geolocation&&this.centerOnCurrentLocation();var o=[],n=s.addresses.length;if(null!==s.addresses.length)for(var l=0;l<n;l++){var d=s.addresses[l].location;void 0!==d&&null!==d&&""!==d.latitude&&""!==d.longitude&&o.push(s.addresses[l])}this.setMapBounds(o),this.addMultipleMarkers(o)},addMultipleMarkers:function(e){for(var t=this.map,r=[],s=e.length,i=0;i<s;i++){var a={lat:parseFloat(e[i].location.latitude),lng:parseFloat(e[i].location.longitude)},o={title:e[i].title,address:e[i].location.address,featuredImage:e[i].featuredImage,itemUrl:e[i].itemUrl,itemAuthor:e[i].itemAuthor},n=new CustomMarker({position:a,map:t,templateData:o,markerPin:e[i].markerPin,markerClass:e[i].markerClass});r.push(n)}this.markers=r,this.initMapClusters(),this.initMarkerInfo();var l=this;google.maps.event.addListener(t,"idle",function(){new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:0,strokeWeight:0,fillColor:"#FF0000",fillOpacity:0,map:t,center:t.getCenter(),radius:1e3*l.radius})})},setMapBounds:function(e){for(var t=new google.maps.LatLngBounds,r=0;r<e.length;r++)t.extend(new google.maps.LatLng(parseFloat(e[r].location.latitude),parseFloat(e[r].location.longitude)));this.map.fitBounds(t)},initMapClusters:function(){var e={minimumClusterSize:2,maxZoom:12,styles:[{width:47,height:47,url:"",textSize:28}]};new MarkerClusterer(this.map,this.markers,e)},initMarkerInfo:function(){e(document).on("click",".mkdf-map-marker",function(){var t=e(this),r=e(".mkdf-map-marker-holder"),s=e(".mkdf-info-window"),i=t.parent(".mkdf-map-marker-holder"),a=t.siblings(".mkdf-info-window");i.hasClass("active")?(i.removeClass("active"),a.fadeOut(0)):(r.removeClass("active"),s.fadeOut(0),i.addClass("active"),a.fadeIn(300))})},addInfoWindow:function(){return new google.maps.InfoWindow({content:""})},centerOnCurrentLocation:function(){var e=this.map;navigator.geolocation.getCurrentPosition(function(t){var r={lat:t.coords.latitude,lng:t.coords.longitude};e.setCenter(r)})},refreshCircleAreaMarkers:function(e){for(var t=this.markers.length,r=0;r<t;r++)e.contains(this.markers[r].getPosition())?this.markers[r].setVisible(!0):this.markers[r].setVisible(!1)}}}(jQuery),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="https://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),r=new google.maps.LatLngBounds,s=0;e=t[s];s++)r.extend(e.getPosition());this.map_.fitBounds(r)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var r=0,s=e.length,i=s;0!==i;)i=parseInt(i/10,10),r++;return r=Math.min(r,t),{text:s,index:r}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){for(var r,s=0;r=e[s];s++)this.pushMarkerTo_(r);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var r,s=0;r=this.markers_[s];s++)if(r==e){t=s;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!(t||!r)&&(this.resetViewport(),this.redraw(),!0)},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var r,s=!1,i=0;r=e[i];i++){var a=this.removeMarker_(r);s=s||a}if(!t&&s)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),s=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),i=t.fromLatLngToDivPixel(r);i.x+=this.gridSize_,i.y-=this.gridSize_;var a=t.fromLatLngToDivPixel(s);a.x-=this.gridSize_,a.y+=this.gridSize_;var o=t.fromDivPixelToLatLng(i),n=t.fromDivPixelToLatLng(a);return e.extend(o),e.extend(n),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,r=0;t=this.clusters_[r];r++)t.remove();for(var s,r=0;s=this.markers_[r];r++)s.isAdded=!1,e&&s.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,r=0;t=e[r];r++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var r=(t.lat()-e.lat())*Math.PI/180,s=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,r=4e4,s=null,i=(e.getPosition(),0);t=this.clusters_[i];i++){var a=t.getCenter();if(a){var o=this.distanceBetweenPoints_(a,e.getPosition());o<r&&(r=o,s=t)}}if(s&&s.isMarkerInClusterBounds(e))s.addMarker(e);else{var t=new Cluster(this);t.addMarker(e),this.clusters_.push(t)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(t),s=0;e=this.markers_[s];s++)!e.isAdded&&this.isMarkerInBounds_(e,r)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,r=0;t=this.markers_[r];r++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,r=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,s=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var i=this.markers_.length;if(i<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),i==this.minClusterSize_)for(var a=0;a<i;a++)this.markers_[a].setMap(null);return i>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),s=0;e=r[s];s++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var r,s=0;r=this.markers_[s];s++)r.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var i=this.markerClusterer_.getStyles().length,a=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(a),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(e){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_,e),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.div_.className="mkdf-cluster-marker",this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML='<div class="mkdf-cluster-marker-inner"><span class="mkdf-cluster-marker-number">'+this.sums_.text+'</span><span class="mkdf-cluster-marker-spiner"></span></div>'}this.getPanes().overlayMouseTarget.appendChild(this.div_);var t=this;google.maps.event.addDomListener(this.div_,"click",function(e){t.triggerClusterClick(e)})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(t.x-=this.iconAnchor_[0],t.y-=this.iconAnchor_[1]):(t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10)),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition,this.iconAnchor_=t.iconAnchor},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?t.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var s=this.textColor_?this.textColor_:"black",i=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+s+"; position:absolute; font-size:"+i+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,function(e){"use strict";function t(){r(),s(),i(),a(),o()}function r(){var t=e(".mkdf-listing-single-holder .mkdf-ls-single-item"),r=t.find("#mkdf-rating"),s=r.val(),i=t.find(".mkdf-star-rating"),a=function(){for(var t=0;t<i.length;t++){var r=i[t];t<s?e(r).addClass("active"):e(r).removeClass("active")}};a(),i.click(function(){r.val(e(this).data("value")).trigger("change")}),r.change(function(){s=r.val(),a()})}function s(){var t=e(".mkdf-ls-single-item");t.length&&t.each(function(){var t=e(this),r=t.attr("id"),s=t.find(".mkdf-ls-single-comments .mkdf-ls-single-sort"),i=t.find(".mkdf-ls-single-comments .mkdf-comment-list");s.on("change",function(){var t=e(this).val();if(mkdf.modules.listings.mkdfIsValidObject(t)){i.fadeOut(300);var s=t.split("-"),a=s[0],o=s[1],n={action:"mkdf_listing_get_post_reviews_ajax",order:o,orderBy:a,postId:r};e.ajax({type:"POST",url:MikadoListingAjaxUrl,data:n,success:function(t){if("error"===t);else{var r=e.parseJSON(t),s=r.html;i.fadeIn(300,function(){i.html(s)})}}})}})})}function i(){var t=e(".mkdf-ls-single-item");t.length&&t.each(function(){var t=e(this),r=t.find(".mkdf-rating-form-trigger"),s=t.find(".mkdf-comment-form .comment-respond");r.on("click",function(){s.slideToggle("slow")})})}function a(){var t=e(".mkdf-ls-single-item"),r=e(".mkdf-ls-enquiry-holder"),s=t.find(".mkdf-ls-single-contact-listing"),i=e(".mkdf-ls-enquiry-close");s.on("click",function(){r.fadeIn(300),r.addClass("opened")}),r.add(i).on("click",function(){r.hasClass("opened")&&(r.fadeOut(300),r.removeClass("opened"))}),e(".mkdf-ls-enquiry-inner").click(function(e){e.stopPropagation()}),e(window).on("keyup",function(e){r.hasClass("opened")&&27==e.keyCode&&(r.fadeOut(300),r.removeClass("opened"))})}function o(){var t=e(".mkdf-ls-enquiry-holder"),r=e(".mkdf-listing-enquiry-response"),s=t.find(".mkdf-ls-enquiry-form");s.on("submit",function(){r.empty();var t={name:s.find("#enquiry-name").val(),email:s.find("#enquiry-email").val(),message:s.find("#enquiry-message").val(),itemId:s.find("#enquiry-item-id").val(),nonce:s.find("#mkdf_listing_nonce_listing_item_enquiry").val()},i={action:"mkdf_listing_send_listing_item_enquiry",data:t};e.ajax({type:"POST",url:MikadoListingAjaxUrl,data:i,success:function(e){"error"===data?r.html(e.data):(r.html(e.data),s.fadeOut(300),setTimeout(function(){s.remove()},300))}})})}var n={};mkdf.modules.listingSingle=n,n.mkdfOnDocumentReady=t,e(document).ready(t),n.mkdfInitCommentRating=r,n.mkdfInitCommentSorting=s,n.mkdfInitNewCommentShowHide=i,n.mkdfShowHideEnquiryForm=a,n.mkdfSubmitEnquiryForm=o}(jQuery),function(e){"use strict";function t(){r()}function r(){var t=e(".mkdf-ls-adv-search-holder");t.length&&t.each(function(){var t=e(this),r=t.data("next-page"),i=t.data("max-num-pages"),a=t.find(".mkdf-ls-adv-search-keyword-button"),o=t.find(".mkdf-ls-adv-search-keyword"),n=mkdfListingTitles.titles,l=t.find(".mkdf-ls-adv-search-load-more");mkdf.modules.listings.mkdfIsValidObject(o)&&o.autocomplete({source:n}),t.filter("[data-enable-item-appear-animation]")&&t.addClass("mkdf-ls-appear-animation"),a.on("click",function(){s(t,!1)}),void 0!==l&&"false"!==l&&(mkdf.modules.listings.mkdfShowHideButton(l,r,i),l.on("click",function(){s(t,!0)}))})}function s(t,r){var s,i,a,o,n=t.data("number"),l=(t.find(".mkdf-ls-adv-search-input"),t.find(".mkdf-ls-adv-search-items-holder-inner")),d=t.data("enable-map"),m=!1,u=t.find(".mkdf-ls-adv-search-load-more"),p=t.find(".mkdf-ls-adv-search-keyword"),c=t.find(".mkdf-ls-adv-search-location"),h=t.find(".mkdf-ls-adv-search-category"),f=t.find(".mkdf-ls-adv-search-type-checkboxes"),k="",g={},v={},y={},C={},_="",M={};if(mkdf.modules.listings.mkdfIsValidObject(d)&&"yes"===d&&(m=!0),f.length){e(".mkdf-ls-adv-search-input").each(function(){var t=e(this);t.is(":checked")&&(C[t.val()]=t.next().text())})}mkdf.modules.listings.mkdfIsValidObject(c)&&""!==c.val()&&(_=c.val()),mkdf.modules.listings.mkdfIsValidObject(h)&&""!==h.val()&&(y[h.val()]=h.find("option:selected").text().trim()),mkdf.modules.listings.mkdfIsValidObject(p)&&(k=p.val()),r?s=mkdf.modules.common.getLoadMoreData(t):t.data("next-page","2"),i=t.data("next-page"),a=t.data("item-type"),o=t.data("title-tag"),M={
action:"mkdf_listing_job_advanced_search_response",postPerPage:n,defaultSearchParams:g,checkBoxSearchParams:v,location:_,catParams:y,typeParams:C,keyword:k,enableLoadMore:r,loadMoreData:s,enableMap:m,itemType:a,titleTag:o},e.ajax({type:"POST",url:MikadoListingAjaxUrl,data:M,success:function(s){if("error"===s);else{var a=e.parseJSON(s),o=a.html,n=a.maxNumPages;if(void 0!==n&&"false"!==n&&t.data("max-num-pages",n),m){var d=a.mapAddresses,p="";mkdf.modules.listings.mkdfIsValidObject(d)&&(p=d.addresses),r?(i++,t.data("next-page",i),mkdf.modules.listings.mkdfReinitMultipleGoogleMaps(p,"append"),setTimeout(function(){l.append(o),l.parents(".kdf-ls-adv-search-holder").filter("[data-enable-item-appear-animation]")&&l.find(".mkdf-ls-item").each(function(t){var r=e(this);r.addClass("mkdf-ls-item-appear"),setTimeout(function(){r.addClass("mkdf-ls-item-appeared")},150*t)})},300)):(mkdf.modules.listings.mkdfReinitMultipleGoogleMaps(p,"replace"),setTimeout(function(){l.html(o),l.parents(".kdf-ls-adv-search-holder").filter("[data-enable-item-appear-animation]")&&l.find(".mkdf-ls-item").each(function(t){var r=e(this);r.addClass("mkdf-ls-item-appear"),setTimeout(function(){r.addClass("mkdf-ls-item-appeared")},150*t)})},300)),mkdf.modules.listings.mkdfBindTitles()}else r?(i++,t.data("next-page",i),setTimeout(function(){l.append(o),l.parents(".kdf-ls-adv-search-holder").filter("[data-enable-item-appear-animation]")&&l.find(".mkdf-ls-item").each(function(t){var r=e(this);r.addClass("mkdf-ls-item-appear"),setTimeout(function(){r.addClass("mkdf-ls-item-appeared")},150*t)})},300)):setTimeout(function(){l.html(o),l.parents(".kdf-ls-adv-search-holder").filter("[data-enable-item-appear-animation]")&&l.find(".mkdf-ls-item").each(function(t){var r=e(this);r.addClass("mkdf-ls-item-appear"),setTimeout(function(){r.addClass("mkdf-ls-item-appeared")},150*t)})},300);mkdf.modules.listings.mkdfShowHideButton(u,i,n)}}})}var i={};mkdf.modules.listingAdvSearch=i,i.mkdfOnDocumentReady=t,e(document).ready(t),i.mkdfInitAdvSearch=r,i.mkdfGetAdvancedSearchResponse=s}(jQuery),function(e){"use strict";function t(){s()}function r(){a()}function s(){var t=e(".mkdf-ls-list-items-holder");t.length&&t.each(function(){var t=e(this),r=t.data("next-page"),s=t.data("max-num-pages"),a=t.find(".mkdf-ls-list-load-more");void 0!==a&&"false"!==a&&(mkdf.modules.listings.mkdfShowHideButton(a,r,s),a.on("click",function(){i(t,!0,e(this))}))})}function i(t,r,s){function i(e,t,r){e.waitForImages({finished:function(){r?e.append(t):e.html(t),a()},waitForAll:!0})}var o,n,l=t.data("listing_list_number"),d=t.find(".mkdf-ls-list-load-more"),m=t.find(".mkdf-ls-list-items-holder-inner"),u=s.text(),p="undefined"!==s.data("loading-text")?s.data("loading-text"):"Loading...",c={};r?o=mkdf.modules.common.getLoadMoreData(t):t.data("next-page","2"),s.text(p),n=t.data("next-page"),c={action:"mkdf_listing_job_list_load_more_response",postPerPage:l,enableLoadMore:r,loadMoreData:o},e.ajax({type:"POST",url:MikadoListingAjaxUrl,data:c,success:function(a){if("error"===a);else{var o=e.parseJSON(a),l=o.html,p=o.maxNumPages;void 0!==p&&"false"!==p&&t.data("max-num-pages",p),r&&(n++,t.data("next-page",n)),i(m,l,r)}s.text(u),mkdf.modules.listings.mkdfShowHideButton(d,n,p)}})}function a(){var t=e(".mkdf-ls-list-holder");t.length&&!mkdf.htmlEl.hasClass("touch")&&t.each(function(){var t=e(this),r=t.find(".mkdf-ls-item"),s=0,i=0;r.each(function(){e(this).offset().top==r.first().offset().top&&s++}),r.appear(function(){var t=e(this);i==s&&(i=0),setTimeout(function(){t.addClass("mkdf-appear"),t.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t.addClass("mkdf-appeared")})},250*i),i++})})}var o={};mkdf.modules.listingList=o,o.mkdfOnDocumentReady=t,o.mkdfOnWindowLoad=r,e(document).ready(t),e(window).load(r),o.mkdfInitListingList=s,o.mkdfGetListResponse=i}(jQuery);